<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE composition PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<ui:composition xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
                template="./../template/Op_Crm_Template.xhtml"
                xmlns:h="http://xmlns.jcp.org/jsf/html"
                xmlns:p="http://primefaces.org/ui"
                xmlns:f="http://xmlns.jcp.org/jsf/core"
                xmlns:b="http://bootsfaces.net/ui"
                xmlns="http://www.w3.org/1999/xhtml">

    <ui:define name="content">
        <h:form id="formMain">
            <b:panel>
                <f:facet name="heading"><h3><b>Add New Campaign</b></h3></f:facet>
                <p:ajaxStatus style="width:16px;height:16px;">
                    <f:facet name="start">
                        <h:graphicImage value="/images/spinner.gif" />
                    </f:facet>
                    <f:facet name="complete">
                        <h:outputText value="" />
                    </f:facet>
                </p:ajaxStatus>
                <p:messages />
                <p:panelGrid>
                    <p:row>
                        <p:column>
                            <p:outputLabel for="name" style="font-weight: bold" value="Campaign Name: " />
                        </p:column>
                        <p:column>
                            <p:inputText required="true" label="name"
                                         requiredMessage="Campaign Name is required." id="name"
                                         value="#{campaignBean.name}">
                            </p:inputText>
                        </p:column>
                        <p:column>
                            <p:message for="name" />
                        </p:column>
                    </p:row>

                    <p:row>
                        <p:column>
                            <p:outputLabel for="startDate" style="font-weight: bold" value="Start Date: " />
                        </p:column>
                        <p:column>
                            <p:calendar id="startDate" required="true" label="startDate"
                                        requiredMessage="Start Date is required."
                                        value="#{campaignBean.startDate}" />
                        </p:column>
                        <p:column>
                            <p:message for="startDate" />
                        </p:column>
                    </p:row>

                    <p:row>
                        <p:column>
                            <p:outputLabel for="endDate" style="font-weight: bold" value="End Date: " />
                        </p:column>
                        <p:column>
                            <p:calendar id="endDate" required="true" label="endDate"
                                        requiredMessage="End Date is required."
                                        value="#{campaignBean.endDate}" />
                        </p:column>
                        <p:column>
                            <p:message for="endDate" />
                        </p:column>
                    </p:row>
<p:row>
                        <p:column>

                            <p:outputLabel for="description" style="font-weight:bold" value="Description: " />
                        </p:column>
                        <p:column>
                            <p:inputTextarea rows = "6" cols = "34" required="true" label="description"
                                         requiredMessage="Campaign Description is required." id="description"
                                         value="#{campaignBean.description}">
                            </p:inputTextarea>
                        </p:column>
                        <p:column>
                            <p:message for="description" />
                        </p:column>
                    </p:row>
                    <p:row>
                        <p:column>
                            <p:outputLabel for="promoCode" style="font-weight:bold" value="Promotional Code: " />
                        </p:column>
                        <p:column>
                            <p:inputText label="promoCode" id="promoCode"
                                         value="#{campaignBean.promoCode}">
                            </p:inputText>
                        </p:column>
                        <p:column>
                            <p:message for="promoCode" />
                        </p:column>
                    </p:row>


                    <p:row>
                        <p:column>
                            <p:outputLabel for="percentDisc" style="font-weight:bold" value="Percentage Discount: " />
                        </p:column>
                        <p:column> 
                            <p:spinner id="percentDisc" 
                                       value="#{campaignBean.percentDisc}" min="0" max="100" stepFactor="0.5" />
                        </p:column>
                        <p:column>
                            <p:message for="percentDisc" />
                        </p:column>

                    </p:row>

                    <p:row>
                        <p:column>
                            <p:outputLabel for="targetAge" style="font-weight:bold" value="Target Age: " />
                        </p:column>
                        <p:column>
                            <h:panelGrid id = "targetAge" columns="1" style="margin-bottom: 10px">
                                <h:outputText id="displayRange" value="Between #{campaignBean.lowerAge} and #{campaignBean.upperAge}" />
                                <p:slider for="lowerAge,upperAge" display="displayRange" style="width: 300px" range="true" displayTemplate="Between {min} and {max}" />
                            </h:panelGrid>
                            <h:inputHidden id="lowerAge" value="#{campaignBean.lowerAge}" />
                            <h:inputHidden id="upperAge" value="#{campaignBean.upperAge}" />
                        </p:column>
                        <p:column>
                            <p:message for="targetAge" />
                        </p:column>
                    </p:row>

                     <p:row>
                        <p:column>
                            <p:outputLabel for="gender" style="font-weight:bold" value="Gender: " />
                        </p:column>
                        <p:column>                           
                            <p:selectOneMenu label="gender" requiredMessage="Please choose the gender" required="true" id="gender" value="#{campaignBean.targetGender}" style="width:100%" >
                                <f:selectItems value="#{campaignBean.genders}" var="genders" itemLabel="#{genders}" itemValue="#{genders}" />
                            </p:selectOneMenu>                          
                        </p:column>
                        <p:column>
                            <p:message for="gender" />
                        </p:column>
                    </p:row>

                    <p:row>
                        <p:column>
                            <p:outputLabel for="targetActive" style="font-weight:bold" value="Target Active Members: " />
                        </p:column>
                        <p:column>
                            <p:selectBooleanCheckbox id="targetActive" value="#{campaignBean.targetActive}" />
                        </p:column>
                        <p:column>
                            <p:message for="targetActive" />
                        </p:column>
                    </p:row>

                    <p:row>
                        <p:column>

                            <p:outputLabel for="targetInactive" style="font-weight:bold" value="Target Inactive Members: " />
                        </p:column>
                        <p:column>

                            <p:selectBooleanCheckbox id="targetInactive" value="#{campaignBean.targetInactive}" />

                        </p:column>
                        <p:column>
                            <p:message for="targetInactive" />
                        </p:column>
                    </p:row>

                    <p:row>
                        <p:column>

                            <p:outputLabel for="targetNew" style="font-weight:bold" value="Target New Members: " />
                        </p:column>
                        <p:column>

                            <p:selectBooleanCheckbox id="targetNew" value="#{campaignBean.targetNew}" />

                        </p:column>
                        <p:column>
                            <p:message for="targetNew" />
                        </p:column>
                    </p:row>

                    <p:row>
                        <p:column>
                            <p:outputLabel for="businessArea" style="font-weight:bold" value="Business Area: " />
                        </p:column>
                        <p:column>                           
                            <p:selectOneMenu label="businessArea" requiredMessage="Please input business area" required="true" id="businessArea" value="#{campaignBean.businessArea}" style="width:100%" >
                                <f:selectItems value="#{campaignBean.businessAreas}" var="businessArea" itemLabel="#{businessArea}" itemValue="#{businessArea}" />
                            </p:selectOneMenu>                          
                        </p:column>
                        <p:column>
                            <p:message for="businessArea" />
                        </p:column>
                    </p:row>

                    <p:row>
                        <p:column>

                            <p:outputLabel for="rfmThreshold" style="font-weight:bold" value="For active customers, add customers with RFM score of at least: " />
                        </p:column>
                        <p:column>

                            <p:spinner id="rfmThreshold" 
                                       value="#{campaignBean.rfmThreshold}" min="0" max="15" stepFactor="1" placeholder ="0" />

                        </p:column>
                        <p:column>
                            <p:message for="rfmThreshold" />
                        </p:column>
                    </p:row>

                    <p:row>
                        <p:column>

                            <p:outputLabel for="highestRfmThreshold" style="font-weight:bold" value="For inactive customers, add customers with highest RFM score of at least: " />
                        </p:column>
                        <p:column>

                            <p:spinner id="highestRfmThreshold" 
                                       value="#{campaignBean.highestRfmThreshold}" min="0" max="15" stepFactor="1" placeholder ="0" />

                        </p:column>
                        <p:column>
                            <p:message for="highestRfmThreshold" />
                        </p:column>
                    </p:row>

                  

                </p:panelGrid>
                <p:commandButton id="btn" value="Save New Campaign" update="@form" actionListener="#{campaignBean.saveNewCampaign}" ajax="true"/>
            </b:panel>
        </h:form>
    </ui:define>

</ui:composition>